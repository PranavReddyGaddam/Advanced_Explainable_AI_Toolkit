# XAI Platform - System Architecture & Data Flow

## Overall System Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                XAI VISUALIZATION PLATFORM                         │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────FRONTEND─────────────────┐    ┌──────────BACKEND───────────┐ │
│  │                                         │    │                             │ │
│  │  ┌─────────────┐  ┌─────────────────┐   │    │  ┌─────────────────────┐   │ │
│  │  │   React     │  │   TypeScript    │   │◄───┼──│     FastAPI         │   │ │
│  │  │   App.tsx   │  │   Components    │   │    │  │   (Python 3.8+)     │   │ │
│  │  └─────────────┘  └─────────────────┘   │    │  └─────────────────────┘   │ │
│  │                                         │    │                             │ │
│  │  ┌─────────────┐  ┌─────────────────┐   │    │  ┌─────────────────────┐   │ │
│  │  │   Vite      │  │   Tailwind CSS  │   │    │  │     Pydantic         │   │ │
│  │  │   Build     │  │   Styling       │   │    │  │   Data Validation    │   │ │
│  │  └─────────────┘  └─────────────────┘   │    │  └─────────────────────┘   │ │
│  │                                         │    │                             │ │
│  │  ┌─────────────┐  ┌─────────────────┐   │    │  ┌─────────────────────┐   │ │
│  │  │   D3.js     │  │   Recharts      │   │    │  │   OpenRouter API     │   │ │
│  │  │   Graphs    │  │   Heatmaps      │   │    │  │   External LLMs      │   │ │
│  │  └─────────────┘  └─────────────────┘   │    │  └─────────────────────┘   │ │
│  │                                         │    │                             │ │
│  │  ┌─────────────┐  ┌─────────────────┐   │    │  ┌─────────────────────┐   │ │
│  │  │Framer Motion│  │   Three.js      │   │    │  │   HuggingFace        │   │ │
│  │  │Animations   │  │Background       │   │    │  │   Internal Models    │   │ │
│  │  └─────────────┘  └─────────────────┘   │    │  └─────────────────────┘   │ │
│  │                                         │    │                             │ │
│  └─────────────────────────────────────────┘    └─────────────────────────────┘ │
│                                                                                 │
│                              HTTP/HTTPS REST API                                │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Frontend Component Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                    FRONTEND                                     │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌───────────────────────────────────────────────────────────────────────────┐  │
│  │                                  App.tsx                                   │  │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐  │  │
│  │  │  ErrorBoundary  │  │  TopRightTooltips│  │      Main Content Area       │  │  │
│  │  │                 │  │  (Conditional)   │  │                             │  │  │
│  │  └─────────────────┘  └─────────────────┘  │  ┌─────────────────────────┐  │  │
│  │                                               │ │    Header Section       │  │  │
│  │                                               │ │  (Title, Description)   │  │  │
│  │                                               │ └─────────────────────────┘  │  │
│  │                                               │  ┌─────────────────────────┐  │  │
│  │                                               │ │     AI_Prompt            │  │  │
│  │                                               │ │  (Input, Submit, Persist)│  │  │
│  │                                               │ └─────────────────────────┘  │  │
│  │                                               │  ┌─────────────────────────┐  │  │
│  │                                               │ │      Results Area        │  │  │
│  │                                               │ │  ┌─────────────────────┐ │  │  │
│  │                                               │ │ │   Tabs Component     │ │  │  │
│  │                                               │ │ │ (Method Comparison)  │ │  │  │
│  │                                               │ │ └─────────────────────┘ │  │  │
│  │                                               │ │  ┌─────────────────────┐ │  │  │
│  │                                               │ │ │ ResultsSplitView     │ │  │  │
│  │                                               │ │ │ (Graph + Response)   │ │  │  │
│  │                                               │ │ └─────────────────────┘ │  │  │
│  │                                               │ │  ┌─────────────────────┐ │  │  │
│  │                                               │ │ │    Heatmap           │ │  │  │
│  │                                               │ │ │ (Token Importance)   │ │  │  │
│  │                                               │ │ └─────────────────────┘ │  │  │
│  │                                               │ │  ┌─────────────────────┐ │  │  │
│  │                                               │ │ │    JsonViewer        │ │  │  │
│  │                                               │ │ │ (Technical Details)  │ │  │  │
│  │                                               │ │ └─────────────────────┘ │  │  │
│  │                                               │ └─────────────────────────┘  │  │
│  │                                               └─────────────────────────────┘  │  │
│  └───────────────────────────────────────────────────────────────────────────┘  │
│                                                                                 │
│  ┌───────────────────────────────────────────────────────────────────────────┐  │
│  │                           Visualization Components                          │  │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐  │  │
│  │  │   NodeGraph     │  │    Heatmap      │  │      AnimatedTooltip         │  │  │
│  │  │  (D3.js Force)  │  │  (Recharts)     │  │    (Framer Motion)          │  │  │
│  │  │                 │  │                 │  │                             │  │  │
│  │  │ • Nodes/Edges   │  │ • Bar Charts    │  │ • Hover Animations           │  │  │
│  │  │ • Force Sim     │  │ • Color Grads   │  │ • Spring Physics             │  │  │
│  │  │ • Zoom/Pan      │  │ • Responsive    │  │ • Tooltips                   │  │  │
│  │  │ • Tooltips      │  │ • 500px Height  │  │ • Conditional Visibility     │  │  │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘  │  │
│  │                                                                                 │  │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐  │  │
│  │  │  FloatingLines  │  │   JsonViewer    │  │         UI Components        │  │  │
│  │  │   (Three.js)    │  │ (Collapsible)   │  │                             │  │  │
│  │  │                 │  │                 │  │ • Tabs, TabsContent         │  │  │
│  │  │ • Shader Anim   │  │ • JSON Tree     │  │ • TabsList, TabsTrigger     │  │  │
│  │  │ • Wave Effects  │  │ • Copy/Download │  │ • Glass Morphism Effects    │  │  │
│  │  │ • Interactive   │  │ • Syntax High   │  │ • Responsive Grid Layouts   │  │  │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘  │  │
│  └───────────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Backend Service Architecture

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                    BACKEND                                      │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌───────────────────────────────────────────────────────────────────────────┐  │
│  │                              FastAPI Application                           │  │
│  │                                                                                 │  │
│  │  ┌─────────────────────────────────────────────────────────────────────┐    │  │
│  │  │                        API Endpoints                                  │    │  │
│  │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────┐    │  │
│  │  │  │  GET /api/models│  │ GET /api/methods│  │ POST /api/explain   │    │  │
│  │  │  │                 │  │                 │  │                     │    │  │
│  │  │  │ • Model List    │  │ • Method List   │  │ • Main Processing    │    │  │
│  │  │  │ • Capabilities  │  │ • Requirements  │  │ • XAI Analysis       │    │  │
│  │  │  │ • Providers     │  │ • Supported     │  │ • Graph Generation    │    │  │
│  │  │  └─────────────────┘  └─────────────────┘  └─────────────────────┘    │  │
│  │  └─────────────────────────────────────────────────────────────────────┘    │  │
│  │                                                                                 │  │
│  │  ┌─────────────────────────────────────────────────────────────────────┐    │  │
│  │  │                     Core Processing Logic                              │    │  │
│  │  │                                                                             │  │
│  │  │  ┌─────────────────────────────────────────────────────────────────┐    │  │
│  │  │  │                generate_explanation()                             │    │  │
│  │  │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────┐    │  │
│  │  │  │  │   Input         │  │   Model         │  │   XAI Methods       │    │  │
│  │  │  │  │   Validation    │  │   Inference     │  │   Application       │    │  │
│  │  │  │  │                 │  │                 │  │                     │    │  │
│  │  │  │  │ • Pydantic      │  │ • OpenRouter    │  │ • LIME Algorithm     │    │  │
│  │  │  │  │ • Schema Check  │  │ • HuggingFace   │  │ • SHAP Analysis      │    │  │
│  │  │  │  │ • Error Handling│  │ • Async Calls   │  │ • Gradient Methods   │    │  │
│  │  │  │  └─────────────────┘  └─────────────────┘  │ • Contrastive        │    │  │
│  │  │  │                                               │ • Attribution Patch  │    │  │
│  │  │  │                                               └─────────────────────┘    │  │
│  │  │  └─────────────────────────────────────────────────────────────────┘    │  │
│  │  │                                                                             │  │
│  │  │  ┌─────────────────────────────────────────────────────────────────┐    │  │
│  │  │  │                Graph Generation Logic                              │    │  │
│  │  │  │                                                                             │  │
│  │  │  │  create_attention_graph(tokens, scores, method)                      │  │
│  │  │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────┐    │  │
│  │  │  │  │   Node Creation │  │   Edge Creation │  │   Method-Specific   │    │  │
│  │  │  │  │                 │  │                 │  │   Patterns          │    │  │
│  │  │  │  │ • Top 15 Tokens │  │ • Sequential    │  │ • LIME: Similarity  │    │  │
│  │  │  │  │ • Importance    │  │ • Attention     │  │ • SHAP: Decay       │    │  │
│  │  │  │  │ • Metadata      │  │ • Weights       │  │ • Contrastive: Max  │    │  │
│  │  │  │  └─────────────────┘  └─────────────────┘  │ • Gradient: Avg     │    │  │
│  │  │  │                                               └─────────────────────┘    │  │
│  │  │  └─────────────────────────────────────────────────────────────────┘    │  │
│  │  └─────────────────────────────────────────────────────────────────────┘    │  │
│  │                                                                                 │  │
│  │  ┌─────────────────────────────────────────────────────────────────────┐    │  │
│  │  │                      Data Models & Schemas                             │    │  │
│  │  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────┐    │  │
│  │  │  │ ExplanationReq  │  │ ExplanationRes  │  │   Graph Models      │    │  │
│  │  │  │                 │  │                 │  │                     │    │  │
│  │  │  │ • model/method  │  │ • tokens/scores │  │ • GraphNode/Edge    │    │  │
│  │  │  │ • input_text    │  │ • narrative     │  │ • AttentionFlow     │    │  │
│  │  │  │ • parameters    │  │ • metadata      │  │ • CausalGraph       │    │  │
│  │  │  │ • validation    │  │ • graphs        │  │ • Validation Rules  │    │  │
│  │  │  └─────────────────┘  └─────────────────┘  └─────────────────────┘    │  │
│  │  └─────────────────────────────────────────────────────────────────────┘    │  │
│  └───────────────────────────────────────────────────────────────────────────┘  │
│                                                                                 │
│  ┌───────────────────────────────────────────────────────────────────────────┐  │
│  │                          External Integrations                             │  │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────────────────┐  │  │
│  │  │  OpenRouter API │  │  HuggingFace    │  │      Model Registry          │  │  │
│  │  │                 │  │  Transformers   │  │                             │  │  │
│  │  │ • LLM Models    │  │ • BERT Base     │  │ • Dynamic Registration       │  │  │
│  │  │ • Async HTTP    │  │ • Mock Responses│  │ • Provider Management        │  │  │
│  │  │ • Session Mgmt  │  │ • Internal Use  │  │ • Model Discovery            │  │  │
│  │  │ • Error Handling│  │ • Tokenization  │  │ • Capability Mapping         │  │  │
│  │  └─────────────────┘  └─────────────────┘  └─────────────────────────────┘  │  │
│  └───────────────────────────────────────────────────────────────────────────┐  │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Complete Data Flow Diagram

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              COMPLETE DATA FLOW                                │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  USER INTERACTION                                                                │
│  ┌─────────────────┐                                                            │
│  │   User Input    │                                                            │
│  │  (Prompt Text)  │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   AI_Prompt     │ ──────────────────────────────────────────────────────┐  │
│  │   Component     │                                                             │  │
│  │                 │                                                             │  │
│  │ • Input Field   │                                                             │  │
│  │ • Submit Button │                                                             │  │
│  │ • Persist Text  │                                                             │  │
│  │ • Validation    │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐                                                             │  │
│  │   App.tsx       │                                                             │  │
│  │   State Mgmt    │                                                             │  │
│  │                 │                                                             │  │
│  │ • useState      │                                                             │  │
│  │ • Comparison    │                                                             │  │
│  │ • Loading State │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐                                                             │  │
│  │   API Service   │                                                             │  │
│  │   (Frontend)    │                                                             │  │
│  │                 │                                                             │  │
│  │ • HTTP Client   │                                                             │  │
│  │ • Error Handling│                                                             │  │
│  │ • Request Build │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐    HTTP POST /api/explain                                  │  │
│  │   Network       │ ────────────────────────────────────────────────────────► │  │
│  │   Request       │                                                             │  │
│  │                 │                                                             │  │
│  │ • JSON Payload  │                                                             │  │
│  │ • Headers       │                                                             │  │
│  │ • Authentication│                                                             │  │
│  └─────────────────┘                                                             │  │
│                                                                                    │  │
│  BACKEND PROCESSING                                                               │  │
│  ┌─────────────────┐    HTTP Request                                             │  │
│  │   FastAPI       │ ◄──────────────────────────────────────────────────────── │  │
│  │   Endpoint      │                                                             │  │
│  │  /api/explain   │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐                                                             │  │
│  │   Pydantic      │                                                             │  │
│  │   Validation    │                                                             │  │
│  │                 │                                                             │  │
│  │ • Schema Check  │                                                             │  │
│  │ • Type Validate │                                                             │  │
│  │ • Error Return  │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐                                                             │  │
│  │   Model         │                                                             │  │
│  │   Selection     │                                                             │  │
│  │                 │                                                             │  │
│  │ • Internal?     │                                                             │  │
│  │ • External?     │                                                             │  │
│  │ • Registry      │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐                                                             │  │
│  │   LLM           │                                                             │  │
│  │   Inference     │                                                             │  │
│  │                 │                                                             │  │
│  │ • OpenRouter    │                                                             │  │
│  │ • HuggingFace   │                                                             │  │
│  │ • Async Call    │                                                             │  │
│  │ • Model Output  │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐                                                             │  │
│  │   XAI Method    │                                                             │  │
│  │   Application   │                                                             │  │
│  │                 │                                                             │  │
│  │ • Tokenization  │                                                             │  │
│  │ • Scoring       │                                                             │  │
│  │ • Algorithm     │                                                             │  │
│  │ • Analysis      │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐                                                             │  │
│  │   Graph         │                                                             │  │
│  │   Generation    │                                                             │  │
│  │                 │                                                             │  │
│  │ • Node Creation │                                                             │  │
│  │ • Edge Creation │                                                             │  │
│  │ • Method Logic  │                                                             │  │
│  │ • JSON Output   │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐                                                             │  │
│  │   Response      │                                                             │  │
│  │   Assembly      │                                                             │  │
│  │                 │                                                             │  │
│  │ • Explanation   │                                                             │  │
│  │ • Narrative     │                                                             │  │
│  │ • Metadata      │                                                             │  │
│  │ • Graphs        │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐    HTTP 200 Response                                       │  │
│  │   JSON Response │ ◄─────────────────────────────────────────────────────── │  │
│  │   Return        │                                                             │  │
│  └─────────────────┘                                                             │  │
│                                                                                    │  │
│  FRONTEND RENDERING                                                               │  │
│  ┌─────────────────┐    Response Data                                            │  │
│  │   State Update  │ ────────────────────────────────────────────────────────► │  │
│  │   (React)       │                                                             │  │
│  │                 │                                                             │  │
│  │ • Loading False │                                                             │  │
│  │ • Data Store    │                                                             │  │
│  │ • Re-render     │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐                                                             │  │
│  │   Component     │                                                             │  │
│  │   Rendering     │                                                             │  │
│  │                 │                                                             │  │
│  │ • ResultsSplit  │                                                             │  │
│  │ • NodeGraph     │                                                             │  │
│  │ • Heatmap       │                                                             │  │
│  │ • JsonViewer    │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐                                                             │  │
│  │   Visualization │                                                             │  │
│  │   Display       │                                                             │  │
│  │                 │                                                             │  │
│  │ • D3.js Graph   │                                                             │  │
│  │ • Recharts      │                                                             │  │
│  │ • Interactive   │                                                             │  │
│  │ • Tooltips      │                                                             │  │
│  └─────────────────┘                                                             │  │
│                                                                                    │  │
│  USER VIEWING                                                                   │  │
│  ┌─────────────────┐                                                            │  │
│  │   User Sees     │                                                            │  │
│  │   Results       │                                                            │  │
│  │                 │                                                            │  │
│  │ • Attention     │                                                            │  │
│  │ • Importance    │                                                            │  │
│  │ • Explanation   │                                                            │  │
│  │ • Technical     │                                                            │  │
│  └─────────────────┘                                                            │  │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## State Management Flow

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            STATE MANAGEMENT FLOW                                │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  INITIAL STATE                                                                   │
│  ┌───────────────────────────────────────────────────────────────────────────┐  │
│  │                          ComparisonState                                   │  │
│  │  {                                                                            │  │
│  │    explanations: {},           // Empty results                             │  │
│  │    inputText: '',              // No input                                  │  │
│  │    selectedApiModel: 'cerebras/llama3.3-70b',  // Default model            │  │
│  │    overallLoading: false       // Not processing                            │  │
│  │  }                                                                            │  │
│  └───────────────────────────────────────────────────────────────────────────┘  │
│                                                                                 │
│  USER INPUT PHASE                                                                │
│  ┌─────────────────┐                                                            │
│  │   User Types    │                                                            │
│  │   in Prompt     │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   onChange      │                                                            │
│  │   Handler       │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   setState      │                                                            │
│  │   inputText     │                                                            │
│  └─────────────────┘                                                            │
│                                                                                 │
│  SUBMISSION PHASE                                                               │
│  ┌─────────────────┐                                                            │
│  │   User Clicks   │                                                            │
│  │   Submit Button │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   setLoading    │ ──────────────────────────────────────────────────────┐  │
│  │   true          │                                                         │  │
│  └─────────┬───────┘                                                         │  │
│            │                                                                 │  │
│            ▼                                                                 │  │
│  ┌─────────────────┐                                                         │  │
│  │   API Call      │                                                         │  │
│  │   Async/Await   │                                                         │  │
│  └─────────┬───────┘                                                         │  │
│            │                                                                 │  │
│            ▼                                                                 │  │
│  ┌─────────────────┐                                                         │  │
│  │   Response      │                                                         │  │
│  │   Received      │                                                         │  │
│  └─────────┬───────┘                                                         │  │
│            │                                                                 │  │
│            ▼                                                                 │  │
│  ┌─────────────────┐                                                         │  │
│  │   setState      │ ◄──────────────────────────────────────────────────── │  │
│  │   explanations  │                                                         │  │
│  │   setLoading    │                                                         │  │
│  │   false         │                                                         │  │
│  └─────────────────┘                                                         │  │
│                                                                                 │
│  VISIBILITY STATE (Tooltips)                                                    │
│  ┌─────────────────┐                                                            │
│  │   Initial:      │                                                            │
│  │   Visible       │                                                            │
│  │   (Empty State) │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   Any Input:    │                                                            │
│  │   Hidden        │                                                            │
│  │   (inputText)   │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   Processing:   │                                                            │
│  │   Hidden        │                                                            │
│  │   (loading)     │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   Results:      │                                                            │
│  │   Hidden        │                                                            │
│  │   (explanations)│                                                            │
│  └─────────────────┘                                                            │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## API Communication Flow

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                            API COMMUNICATION FLOW                               │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ENDPOINT: GET /api/models                                                       │
│  ┌─────────────────┐    GET /api/models                                         │
│  │   Frontend      │ ───────────────────────────────────────────────────────► │  │
│  │   Request       │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐    Model List Response                                    │  │
│  │   Backend       │ ◄──────────────────────────────────────────────────────── │  │
│  │   Response      │                                                             │  │
│  │  [              │                                                             │  │
│  │    {            │                                                             │  │
│  │      "name": "cerebras/llama3.3-70b",                                       │  │
│  │      "provider": "Cerebras",                                                │  │
│  │      "capabilities": {                                                      │  │
│  │        "logprobs": true,                                                     │  │
│  │        "attention_weights": false,                                          │  │
│  │        "hidden_states": false,                                              │  │
│  │        "gradients": false                                                   │  │
│  │      }                                                                      │  │
│  │    }                                                                        │  │
│  │  ]                                                                          │  │
│  └─────────────────┘                                                             │  │
│                                                                                 │
│  ENDPOINT: GET /api/methods                                                      │
│  ┌─────────────────┐    GET /api/methods                                        │  │
│  │   Frontend      │ ───────────────────────────────────────────────────────► │  │
│  │   Request       │                                                             │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐    Method List Response                                   │  │
│  │   Backend       │ ◄──────────────────────────────────────────────────────── │  │
│  │   Response      │                                                             │  │
│  │  [              │                                                             │  │
│  │    {            │                                                             │  │
│  │      "name": "lime",                                                        │  │
│  │      "description": "Local Interpretable Model-agnostic Explanations",      │  │
│  │      "requires_internals": false,                                           │  │
│  │      "fallback_available": false,                                           │  │
│  │      "supported_models": ["all"]                                           │  │
│  │    }                                                                        │  │
│  │  ]                                                                          │  │
│  └─────────────────┘                                                             │  │
│                                                                                 │
│  ENDPOINT: POST /api/explain                                                     │
│  ┌─────────────────┐    POST /api/explain                                       │  │
│  │   Frontend      │ ───────────────────────────────────────────────────────► │  │
│  │   Request       │                                                             │  │
│  │  {              │                                                             │  │
│  │    "model": "cerebras/llama3.3-70b",                                        │  │
│  │    "method": "lime",                                                        │  │
│  │    "input_text": "Explain machine learning",                               │  │
│  │    "parameters": {}                                                        │  │
│  │  }                                                                          │  │
│  └─────────┬───────┘                                                             │  │
│            │                                                                     │  │
│            ▼                                                                     │  │
│  ┌─────────────────┐    Explanation Response                                    │  │
│  │   Backend       │ ◄──────────────────────────────────────────────────────── │  │
│  │   Response      │                                                             │  │
│  │  {              │                                                             │  │
│  │    "model": "cerebras/llama3.3-70b",                                        │  │
│  │    "method": "lime",                                                        │  │
│  │    "input_text": "Explain machine learning",                               │  │
│  │    "output_text": "Machine learning is...",                                 │  │
│  │    "tokens": ["Explain", "machine", "learning"],                           │  │
│  │    "scores": [0.8, 0.6, 0.9],                                              │  │
│  │    "narrative": "Analysis using LIME...",                                  │  │
│  │    "metadata": {...},                                                       │  │
│  │    "graphs": {                                                              │  │
│  │      "attention_flow": {                                                    │  │
│  │        "nodes": [...],                                                      │  │
│  │        "edges": [...]                                                       │  │
│  │      }                                                                      │  │
│  │    }                                                                        │  │
│  │  }                                                                          │  │
│  └─────────────────┘                                                             │  │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## Error Handling Flow

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                             ERROR HANDLING FLOW                                │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  FRONTEND ERRORS                                                                │
│  ┌─────────────────┐                                                            │
│  │   React Error   │                                                            │
│  │   Boundary      │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   Catch Error   │                                                            │
│  │   Log Error     │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   Show Fallback │                                                            │
│  │   UI Component  │                                                            │
│  └─────────────────┘                                                            │
│                                                                                 │
│  API ERRORS                                                                     │
│  ┌─────────────────┐                                                            │
│  │   HTTP Error    │                                                            │
│  │   (4xx, 5xx)    │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   .catch()      │                                                            │
│  │   Block         │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   setError      │                                                            │
│  │   State         │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   Show Error    │                                                            │
│  │   Message       │                                                            │
│  └─────────────────┘                                                            │
│                                                                                 │
│  BACKEND ERRORS                                                                │
│  ┌─────────────────┐                                                            │
│  │   Pydantic      │                                                            │
│  │   Validation    │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   HTTPException │                                                            │
│  │   Raise Error   │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   JSON Response │                                                            │
│  │   Error Detail  │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   Status Code   │                                                            │
│  │   400/500       │                                                            │
│  └─────────────────┘                                                            │
│                                                                                 │
│  EXTERNAL API ERRORS                                                            │
│  ┌─────────────────┐                                                            │
│  │   OpenRouter    │                                                            │
│  │   API Failure   │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   try/except    │                                                            │
│  │   Block         │                                                            │
│  └─────────┬───────┘                                                            │
│            │                                                                    │
│            ▼                                                                    │
│  ┌─────────────────┐                                                            │
│  │   Log Error     │                                                            │
│  │   Return 500    │                                                            │
│  └─────────────────┘                                                            │
└─────────────────────────────────────────────────────────────────────────────────┘
```

This comprehensive system architecture documentation provides detailed ASCII diagrams covering the entire frontend-to-backend data flow, component relationships, state management, API communication, and error handling patterns of the XAI Visualization Platform.
